CREATE TABLE `master_account` (
  `id` varchar(36) NOT NULL,
  `ref_id` varchar(45) DEFAULT NULL,
  `acc_type` varchar(45) NOT NULL,
  `acc_owner` varchar(45) NOT NULL,
  `first_name` varchar(45) NOT NULL,
  `last_name` varchar(45) NOT NULL,
  `pref_name` varchar(45) DEFAULT NULL,
  `dob` datetime NOT NULL,
  `country` varchar(45) NOT NULL,
  `address` longtext,
  `city` varchar(45) NOT NULL,
  `province` varchar(45) DEFAULT NULL,
  `zip_code` varchar(45) DEFAULT NULL,
  `phone` varchar(45) NOT NULL,
  `email` varchar(45) NOT NULL,
  `password` varchar(255) NOT NULL,
  `security_question` varchar(45) NOT NULL,
  `security_answer` varchar(45) NOT NULL,
  `confirm_security_answer` varchar(45) NOT NULL,
  `education` varchar(45) NOT NULL,
  `trading_experience` varchar(45) NOT NULL,
  `trading_frequency` varchar(45) NOT NULL,
  `purpose_of_trading` varchar(45) NOT NULL,
  `annual_gross_income` varchar(45) NOT NULL,
  `net_worth` varchar(45) NOT NULL,
  `income_source` varchar(45) NOT NULL,
  `is_muslim` varchar(45) DEFAULT NULL,
  `public_position` varchar(45) NOT NULL,
  `detail_public_position` varchar(45) DEFAULT NULL,
  `family_public_position` varchar(45) NOT NULL,
  `detail_family_public_position` varchar(45) DEFAULT NULL,
  `leverage` varchar(45) DEFAULT NULL,
  `pref_language` varchar(45) NOT NULL,
  `proof_of_identity` varchar(45) DEFAULT NULL,
  `proof_of_residence` varchar(45) DEFAULT NULL,
  `open_ib_account` varchar(45) DEFAULT NULL,
  `demo` tinyint(4) DEFAULT NULL,
  `live` tinyint(4) DEFAULT NULL,
  `date_created` datetime DEFAULT NULL,
  `date_updated` datetime DEFAULT NULL,
  `id_card` varchar(45) DEFAULT NULL,
  `gender` varchar(255) DEFAULT NULL,
  `refresh_token` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `balance` (
  `id` varchar(36) NOT NULL,
  `id_card` varchar(45) DEFAULT NULL,
  `last_topup` date DEFAULT NULL,
  `balance` double DEFAULT NULL,
  `acc_id` varchar(36) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_acc_id_idx` (`acc_id`),
  CONSTRAINT `FK_acc_id` FOREIGN KEY (`acc_id`) REFERENCES `master_account` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


CREATE TABLE `topup_history` (
  `id` varchar(36) NOT NULL,
  `topup_value` double DEFAULT NULL,
  `topup_date` datetime DEFAULT NULL,
  `balance_id` varchar(36) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_balance_id_idx` (`balance_id`),
  CONSTRAINT `FK_balance_id` FOREIGN KEY (`balance_id`) REFERENCES `balance` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
